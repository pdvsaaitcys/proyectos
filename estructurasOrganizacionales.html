<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Organigrama Dinámico</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        h1 {
            margin-bottom: 20px;
        }
        .org-chart {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 40px;
        }
        .node {
            background-color: #fff;
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 10px;
            margin: 5px;
            text-align: center;
            position: relative;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .line {
            width: 2px;
            background-color: #ccc;
            position: absolute;
            top: -20px; 
            left: 50%;
            height: 20px;
            transform: translateX(-50%);
        }
        .children {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>Estructuras Organizacionales</h1>
    
    <div class="container">
        <div class="org-chart" id="cypChart"></div>
        <div class="org-chart" id="galbaChart"></div>
        <div class="org-chart" id="tecnologiaChart"></div>
    </div>

    <script>
        const cyp = {
            "puesto": "Consultaria y Proyectos",
            "nombre": "Aracelis Suez",
            "hijos": [
                {
                    "puesto": "Exploración y Producción",
                    "nombre": "Melchor Rivas",
                    "hijos": []
                },
                {
                    "puesto": "Gas",
                    "nombre": "Samith Gómez",
                    "hijos": []
                },
                {
                    "puesto": "Refinación",
                    "nombre": "Nilda Lugo",
                    "hijos": []
                },
                {
                    "puesto": "Comercio y Suministro",
                    "nombre": "",
                    "hijos": [
                        {
                            "puesto": "Consultoria",
                            "nombre": "J. Chavez",
                        },
                        {
                            "puesto": "AR",
                            "nombre": "O. Mejias",
                        },
                        {
                            "puesto": "Proy",
                            "nombre": "F. Suárez",
                        },
                        {
                            "puesto": "Reg",
                            "nombre": "",
                        }
                    ]
                },
                {
                    "puesto": "Servicios No Petrolero",
                    "nombre": "María Veliz",
                    "hijos": []
                },
                {
                    "puesto": "Gestión Empresarial",
                    "nombre": "Franklin Avila",
                    "hijos": []
                }
            ]
        };

        const galba = {
            "puesto": "Galba",
            "nombre": "Omar Gomez",
            "asesores": [
                {
                    "puesto": "Arquitectura",
                    "nombre": "Francisco Rodriguez"
                },
                {
                    "puesto": "Planificación",
                    "nombre": "Juan Mejias"
                }
            ],
            "hijos": [
                {
                    "puesto": "Investigacion y Optimización",
                    "nombre": "Edgar Camargo",
                    "hijos": []
                },
                {
                    "puesto": "Innovacion y Prospectiva",
                    "nombre": "Oliver Colmenarez",
                    "hijos": []
                },
                {
                    "puesto": "Desarrollo Prototipo",
                    "nombre": "Egner Acero",
                    "hijos": []
                },
                {
                    "puesto": "Aseguramiento de Calidad",
                    "nombre": "Marilu Parra",
                    "hijos": []
                },
                {
                    "puesto": "Cartera Proyecto",
                    "nombre": "Samuel Reyes",
                    "hijos": []
                },
                {
                    "puesto": "Mantenimiento y Desarrollo",
                    "nombre": "Giampiero Ferrara",
                    "hijos": []
                },
                {
                    "puesto": "Integración",
                    "nombre": "Yuleida Blanco",
                    "hijos": []
                },
                {
                    "puesto": "Implantacion de Soluciones",
                    "nombre": "Douglas López",
                    "hijos": []
                }
            ],
        };

        const tecnologia = {
            "puesto": "Tecnología",
            "nombre": "Carmen Rodríguez",
            "asesores": [
                {
                    "puesto": "Arquitectura",
                    "nombre": "José Leal"
                }
            ],
            "hijos": [
                {
                    "puesto": "Automatización",
                    "nombre": "Roberto Galtieri",
                    "hijos": []
                },
                {
                    "puesto": "Telecomunicaciones",
                    "nombre": "José Gregorio Hernández",
                    "hijos": []
                },
                {
                    "puesto": "Informática",
                    "nombre": "Juan Moreno",
                    "hijos": []
                }
            ],
        };

        function createNode(nodeData, isAsesor=false) {
            const node = document.createElement('div');
            node.className = `node ${isAsesor ? 'text-bg-primary' : 'text-bg-light'}`;
            node.innerHTML = `<strong>${nodeData.puesto}</strong><br>${nodeData.nombre || 'Sin nombre'}`;

            // Agregar asesores si existen
            if (nodeData.asesores && nodeData.asesores.length > 0) {
                const asesoresContainer = document.createElement('div');
                asesoresContainer.className = 'children';
                nodeData.asesores.forEach(asesor => {
                    asesoresContainer.appendChild(createNode(asesor, true));
                });
                    node.appendChild(asesoresContainer);
            }

            if (nodeData.hijos && nodeData.hijos.length > 0) {
                const childrenContainer = document.createElement('div');
                childrenContainer.className = 'children';
                nodeData.hijos.forEach(child => {
                    childrenContainer.appendChild(createNode(child));
                });
                node.appendChild(childrenContainer);
            }

            return node;
        }

        document.getElementById('cypChart').appendChild(createNode(cyp));
        document.getElementById('galbaChart').appendChild(createNode(galba));
        document.getElementById('tecnologiaChart').appendChild(createNode(tecnologia));
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
